#1951. All the Pairs With the Maximum Number of Common Followers


#寻找最多common follower，
#利用共同follower_id, 先inner join，形成两两关系，再group by这两个两个id，选择最大配对数

with t as
    (select r1.user_id as user1_id, r2.user_id as user2_id, count(1) as cnt
          from relations as r1
            inner join relations as r2
            on r1.follower_id = r2.follower_id
            and r1.user_id < r2.user_id
          group by r1.user_id, r2.user_id)
select user1_id,user2_id
from t
where cnt =(select max(cnt) from t)
